<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <link rel="icon" href="data:,">
    <title>Painel</title>
    <%- include('partials/components/dropdown.ejs') %>
  </head>
  <body class="bg-zinc-100 min-h-full min-h-screen">
    <main class="mx-auto w-full max-w-7xl py-4 px-4 3xl:px-0">
      <header class="bg-white relative flex flex-col rounded mb-6">
        <div
          class="h-42 bg-linear-to-r from-cyan-500 to-blue-500 rounded-t"
        ></div>
        <div
          class="flex-1 py-8 px-8 md:pl-8 md:pr-4 flex flex-col items-center md:flex-row border-l border-r border-b border-zinc-300 rounded-b"
        >
          <div class="h-0">
            <img
              src="<%= user.photoUrl ? user.photoUrl : `https://ui-avatars.com/api/?name=${user.name.replace(/\s/g, '+')}`%>"
              class="-translate-y-24 outline-4 outline-white rounded w-32 md:mr-8"
            />
          </div>
          <div class="flex-1 mt-18 md:mt-0 text-center md:text-left">
            <h3
              class="text-2xl mb-2 md:mb-0 font-bold flex flex-col md:flex-row items-center md:items-baseline"
            >
              <span class="md:mr-1"><%= user.name %></span>
              <a
                target="_blank"
                href="<%= `/links/${user.username}` %>"
                class="text-sm cursor-pointer text-zinc-600 hover:text-indigo-500 font-medium flex md:inline-flex items-center transition duration-200"
              >
                (
                <span class="mr-1">@<%= user.username %></span>
                <i data-feather="external-link" class="inline w-4 h-4"></i>
                )
              </a>
            </h3>
            <p class="text-sm">
              <%= user.description ? user.description : 'Sem descrição' %>
            </p>
          </div>
          <div class="mt-4 md:mt-0">
            <%- include('partials/user-dropdown.ejs') %>
          </div>
        </div>
      </header>
      <section
        class="mb-0 h-0 opacity-0 pointer-events-none border-0 overflow-hidden has-aria-expanded:mb-4 has-aria-expanded:h-auto has-aria-expanded:opacity-100 has-aria-expanded:pointer-events-auto has-aria-expanded:border bg-white px-4 rounded border-zinc-300 transition"
      >
        <h1 class="text-black text-xl font-medium mt-4 mb-6">Editar usuário</h1>
        <%- include('partials/update-user-form.ejs') %>
      </section>
      <div class="flex items-center justify-between mb-6">
        <h1 class="text-black text-xl font-medium">Meus links</h1>
        <a
          href="/account/link"
          class="text-white font-medium text-center py-2 rounded bg-indigo-500 hover:bg-indigo-800 transition px-6"
        >
          Adicionar
        </a>
      </div>
      <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <% links.forEach(function (link) { %>
        <article
          class="relative bg-white p-4 rounded border border-zinc-300 flex items-center justify-between"
        >
          <div>
            <h3 class="text-md font-medium flex items-center">
              <span class="mr-2"><%= link.title %></span>
              <% if (!link.active) { %>
              <span
                class="px-2 py-0.5 rounded-full bg-zinc-400 text-zinc-800 text-center text-xs"
              >
                Inativo
              </span>
              <% } %>
            </h3>
            <div class="w-full text-zinc-600 flex items-center">
              <i
                data-feather="corner-down-right"
                class="inline w-4 h-4 mr-1"
              ></i>
              <a
                class="text-sm overflow-hidden text-ellipsis hover:underline"
                href="<%= link.link %>"
                target="_blank"
                ><%= link.link %></a
              >
            </div>
          </div>
          <%- include('partials/link-dropdown.ejs', { link }) %>
        </article>
        <% }) %>
      </section>
    </main>
    <script>
      feather.replace();
    </script>
  </body>
</html>
