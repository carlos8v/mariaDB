<custom-dropdown aria-expanded="false">
  <div>
    <button id="user-dropdown-trigger" is="custom-dropdown-trigger" class="p-1">
      <img
        src="<%= user.photoUrl ? user.photoUrl : `https://ui-avatars.com/api/?name=${user.name.replace(/\s/g, '+')}`%>"
        class="rounded-full w-10 mx-auto"
      />
    </button>
  </div>
  <custom-dropdown-content>
    <div class="py-1 flex flex-col gap-0.5" role="none">
      <button
        id="edit-user-button"
        class="flex items-center rounded mx-1 px-2 py-2 text-sm text-gray-800 hover:bg-zinc-100 transition"
      >
        <i data-feather="edit" class="w-4 h-4 mr-2"></i>
        Editar
      </button>
      <button
        class="flex items-center rounded mx-1 px-2 py-2 text-sm text-gray-800 hover:bg-zinc-100 transition"
      >
        <i data-feather="lock" class="w-4 h-4 mr-2"></i>
        Alterar senha
      </button>
      <button
        id="add-admin-button"
        class="cursor-default flex items-center rounded mx-1 px-2 py-2 text-sm text-gray-800 hover:bg-zinc-100 transition"
      >
        <i data-feather="shield" class="w-4 h-4 mr-2"></i>
        Adicionar admin
      </button>
      <form method="post" action="<%= `/logout` %>" class="w-full px-1">
        <input hidden type="text" name="csrf" value="<%= csrf %>" />
        <button
          type="submit"
          class="w-full flex items-center rounded px-2 py-2 text-sm text-gray-800 hover:bg-red-100 hover:text-red-500 transition"
        >
          <i data-feather="log-out" class="w-4 h-4 mr-2"></i>
          Sair
        </button>
      </form>
    </div>
  </custom-dropdown-content>
</custom-dropdown>

<script>
  const dropdownTrigger = document.querySelector("#user-dropdown-trigger");

  document
    .querySelector("#edit-user-button")
    .addEventListener("click", function () {
      dropdownTrigger.click();

      const editUserForm = document.querySelector("#update-user-form");
      editUserForm.setAttribute("aria-expanded", "true");
    });

  document
    .querySelector("#add-admin-button")
    .addEventListener("click", function () {
      dropdownTrigger.click();

      const addAdminForm = document.querySelector("#add-admin-form");
      addAdminForm.setAttribute("aria-expanded", "true");
    });
</script>
